{% extends "base.html" %}
<!-- Speaker Selection -->
{% block content %}

<div id="demo">
    <section class="py-24 bg-gradient-to-b from-white to-gray-50">
      <div class="container mx-auto px-4 md:px-8">
        <div class="text-center mb-16">
          <span
            class="inline-block px-3 py-1 text-sm font-medium bg-indigo-100 text-indigo-800 rounded-full mb-3"
            >Interactive Demo</span
          >
          <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
            Experience Our Technology
          </h2>
          <p class="text-gray-600 max-w-2xl mx-auto">
            Try our Text-to-Speech engine with our easy-to-use demo and hear the
            quality for yourself.
          </p>
        </div>
  
        <div
          class="max-w-5xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden"
        >
          <div class="grid grid-cols-1 lg:grid-cols-2">
            <!-- Demo Preview Image Side -->
            <div class="relative h-64 lg:h-auto">
              <img
                src="https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w2MzQ2fDB8MXxzZWFyY2h8Mnx8ZGVtbyUyMHByb2Zlc3Npb25hbHxlbnwwfDB8fHwxNzQzMTYzMTI2fDA&ixlib=rb-4.0.3&q=80&w=1080?q=80"
                alt="Person using our TTS service on laptop"
                onerror="this.onerror=null; this.src='https://placehold.co/600x400'"
                class="w-full h-full object-cover"
              />
              <div
                class="absolute inset-0 bg-indigo-900 bg-opacity-30 backdrop-filter backdrop-blur-sm flex items-center justify-center"
              >
                <div class="text-white text-center p-6">
                  <div
                    class="w-16 h-16 mx-auto bg-white bg-opacity-20 rounded-full flex items-center justify-center mb-4 backdrop-filter backdrop-blur-sm border border-white border-opacity-40"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="h-8 w-8"
                      viewBox="0 0 20 20"
                      fill="currentColor"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"
                        clip-rule="evenodd"
                      />
                    </svg>
                  </div>
                  <h3  class="text-xl font-bold">Now Playing</h3>
                  <p id="img-speaker-name" class="text-sm text-white text-opacity-80 mt-2">
                    James (British Male)
                  </p>
                </div>
              </div>
            </div>
  
            <!-- Demo Controls Side -->
            <div class="p-6 md:p-8 lg:p-10">
              <h3 class="text-xl font-bold text-gray-900 mb-6">
                Demo Generate Speech
              </h3>
  
              <!-- Voice Selection -->
              <div class="mb-6">
                <label
                  for="speaker-select"
                  class="block text-sm font-medium text-gray-700 mb-2"
                  >Select Voice</label
                >
                <div class="relative">
                  <select
                    id="speaker-select"
                    class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 bg-white px-4 py-2.5 text-gray-700 appearance-none"
                  >
                  <option value="">Select a speaker</option>

                  </select>
                  <div
                    class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-gray-700"
                  >
                    <svg
                      class="h-5 w-5"
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 20 20"
                      fill="currentColor"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                        clip-rule="evenodd"
                      />
                    </svg>
                  </div>
                </div>
              </div>
  
              
<!-- Text Display (Non-Editable) -->
<div class="mb-6">
    <label for="demo-text" class="block text-sm font-medium text-gray-700 mb-2">
      Example Text Output
    </label>
    <div
      id="demo-text"
      class="block w-full rounded-lg border-gray-300 shadow-sm bg-gray-100 p-4 text-gray-700 transition-all duration-200"
    >
      Once upon a time in a distant kingdom, there was a young adventurer named Alex. With a heart full of dreams and a mind set on discovery, Alex embarked on a journey to uncover the secrets of the enchanted forest. As they ventured deeper, they encountered magical creatures, hidden treasures, and an ancient prophecy that would change their life forever...    </div>
  </div>
  
  

  
              <!-- Audio Player -->
              <div class="mb-6 p-4 bg-gray-50 rounded-lg">

  
                <!-- Audio  -->
                <div
                  class="relative h-12 mb-2 bg-white rounded-md overflow-hidden"
                >
                <audio id="audio-player" controls class="w-full hidden"></audio>
                </div>
  
                <!-- Audio Controls -->

              </div>
  
              <!-- Action Buttons -->
              <div class="flex flex-col sm:flex-row gap-3">
                <button
                  id="generate-btn"
                  class="flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-lg px-5 py-2.5 transition-all duration-300 hover:scale-105 shadow-md hover:shadow-lg flex items-center justify-center"
                >
                  <span>Audio</span>

                </button>
                <button
                  class="flex-1 sm:flex-initial bg-white hover:bg-gray-50 text-gray-700 font-medium rounded-lg px-5 py-2.5 border border-gray-300 transition-all duration-300 hover:scale-105 shadow-sm hover:shadow"
                >
                  Copy Link
                </button>
              </div>
            </div>
          </div>
        </div>
  
    </section>
</div>
{% endblock %}
{% block script %}
<script>
document.addEventListener("DOMContentLoaded", function () {
    const speakerSelect = document.getElementById("speaker-select");
    const audioPlayer = document.getElementById("audio-player");

    // Fetch available speakers
    fetch("/api/speakers/")
        .then(response => response.json())
        .then(data => {
            data.speakers.forEach(speaker => {
                let option = document.createElement("option");
                option.value = speaker.file;
                option.textContent = speaker.name;
                speakerSelect.appendChild(option);
            });
        });

    // Play selected audio
    document.getElementById("generate-btn").addEventListener("click", function () {
        const speakerValue = speakerSelect.value; // Get selected speaker
        if (speakerValue) {
            audioPlayer.src = `/api/audio/${speakerValue}`;
            audioPlayer.classList.remove("hidden");
            audioPlayer.play();
            document.getElementById("img-speaker-name").innerHTML = speakerSelect.options[speakerSelect.selectedIndex].text;
        } else {
            audioPlayer.classList.add("hidden");
        }
    });

});
</script>
{% endblock %}

